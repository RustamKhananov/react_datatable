(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(7),i=n.n(o),r=n(2),l=n(4),u=n(1),s=function(e){var t=e.value,n=e.initialPhones,o=e.setInitialPhones,i=e.phoneId,l=e.head,s=Object(a.useState)(!1),m=Object(u.a)(s,2),f=m[0],b=m[1],h=Object(a.useState)(t),p=Object(u.a)(h,2),g=p[0],d=p[1],E=function(){o(Object(r.a)(n).map(function(e){return e.id===i&&(e[l]=g),e}))};return c.a.createElement("td",{className:"table__cell",onDoubleClick:function(){b(!0)},key:(new Date).getTime()},f?c.a.createElement(c.a.Fragment,null,c.a.createElement("textarea",{autoFocus:!0,className:"table__textarea",value:g,onKeyDown:function(e){"Enter"===e.key&&(E(),b(!1)),"Escape"===e.key&&(b(!1),d(t))},onClick:function(e){e.stopPropagation()},onChange:function(e){return d(e.target.value)},onBlur:function(){E(),b(!1)}})):c.a.createElement("p",null,t))},m=function(e){var t,n=e.phone,a=e.handleRowClick,o=e.onSelectionChanged,i=e.heads,r=e.initialPhones,l=e.setInitialPhones,u=!0;return c.a.createElement("tr",{key:"rowOf".concat(n.id),className:n.isSelected?"selected":"",onClick:function(){u?(t=setTimeout(function(){return a(n.id)},200),u=!1):(clearTimeout(t),u=!0)}},"function"===typeof o?c.a.createElement("td",null,c.a.createElement("input",{type:"checkbox",checked:n.isSelected,onChange:function(){}})):"",i.map(function(e){return c.a.createElement(s,{key:n.id+e,value:n[e],phoneId:n.id,head:e,initialPhones:r,setInitialPhones:l})}))},f=function(e){var t=e.phones,n=e.initialPhones,a=e.columnsConfig,o=e.onSelectionChanged,i=e.handleColumnHeadClick,r=e.isAllSelected,l=e.handleIsAllSelectedClick,u=e.handleRowClick,s=e.setInitialPhones,f=Object.keys(a);return c.a.createElement("table",{className:"table"},c.a.createElement("thead",{className:"thead"},c.a.createElement("tr",null,"function"===typeof o?c.a.createElement("th",null,c.a.createElement("input",{type:"checkbox",checked:r,onChange:function(){},onClick:l})):"",f.map(function(e){return c.a.createElement("th",{key:"headOf".concat(e),onClick:function(){i(e)}},"".concat(a[e].title,"   ").concat(a[e].sortDirection||""))}))),c.a.createElement("tbody",null,t.map(function(e){return c.a.createElement(m,{key:e.id,initialPhones:n,phone:e,handleRowClick:u,onSelectionChanged:o,heads:f,setInitialPhones:s})})))},b=function(e){var t=e.columnsConfig,n=e.handleFilterChange,o=Object(a.useState)(""),i=Object(u.a)(o,2),r=i[0],l=i[1],s=Object(a.useState)(Object.keys(t).find(function(e){return t[e].isSearchable})||""),m=Object(u.a)(s,2),f=m[0],b=m[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{type:"text",placeholder:"Enter seaching text here...",onChange:function(e){l(e.target.value),n(e.target.value,f)}}),c.a.createElement("select",{value:f,onChange:function(e){b(e.target.value),n(r,e.target.value)}},c.a.createElement("option",null),Object.keys(t).map(function(e){return t[e].isSearchable?c.a.createElement("option",{key:e},e):""})))},h=function(e){for(var t=e.total,n=e.perPage,a=e.page,o=e.setPerPage,i=(e.setTotal,e.setPage),r=Math.ceil(t/n),l=[],u=0;u<r;u++)l.push(u+1);return c.a.createElement("div",{className:"pagination"},c.a.createElement("label",null,c.a.createElement("select",{className:"pagination__per-page-select",value:n,onChange:function(e){+e.target.value>0&&o(+e.target.value)}},c.a.createElement("option",{value:5},"5"),c.a.createElement("option",{value:10},"10"),c.a.createElement("option",{value:15},"15"),c.a.createElement("option",{value:20},"20")),c.a.createElement("span",null,"items per page.")),c.a.createElement("div",{className:"pagination__buttons-wrapper"},c.a.createElement("button",{onClick:function(){return i(a-1)},disabled:1===a,className:1===a?"pagination__button nonActive":"pagination__button"},"<<"),l.map(function(e){return c.a.createElement("button",{key:(new Date).getTime()*e,onClick:function(){return i(e)},className:a===e?"pagination__button pagination__button--active":"pagination__button"},e)}),c.a.createElement("button",{onClick:function(){return i(a+1)},disabled:a===l.length,className:a===l.length?"pagination__button nonActive":"pagination__button"},">>")))},p=function(e){var t=e.from,n=e.to,a=e.total;return c.a.createElement("h1",{className:"title-pagination"},"".concat(t+1," - ").concat(Math.min(n,a)," from ").concat(a))},g=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(0),s=Object(u.a)(i,2),m=s[0],g=s[1],d=Object(a.useState)(5),E=Object(u.a)(d,2),O=E[0],j=E[1],S=Object(a.useState)(1),C=Object(u.a)(S,2),v=C[0],k=C[1],y=Object(a.useState)(!1),w=Object(u.a)(y,2),_=w[0],P=w[1],D=Object(a.useState)([]),I=Object(u.a)(D,2),N=I[0],T=I[1],x=Object(a.useState)([]),A=Object(u.a)(x,2),F=A[0],L=A[1],R=Object(a.useState)(""),J=Object(u.a)(R,2),B=J[0],H=J[1],M=Object(a.useState)(""),U=Object(u.a)(M,2),K=U[0],q=U[1],z=Object(a.useState)({age:{title:"Age",sortType:"number",isSearchable:!0,sortDirection:"\u2195"},id:{title:"Id",sortType:"string",isSearchable:!0,sortDirection:"\u2195"},imageUrl:{title:"imageUrl",isSearchable:!0},name:{title:"Name",sortType:"string",isSearchable:!0,sortDirection:"\u2195"},snippet:{title:"Snippet",sortType:"string",isSearchable:!0,sortDirection:"\u2195"}}),G=Object(u.a)(z,2),Q=G[0],V=G[1];window.onbeforeunload=function(){return!1},Object(a.useEffect)(function(){L(""!==K&&""!==B?N.filter(function(e){return e[K].toString(10).toLowerCase().includes(B.toLowerCase())}):N)},[N,K,B]),Object(a.useEffect)(function(){var e=(v-1)*O,t=e+O;o(F.slice(e,t))},[m,O,v,F]),Object(a.useEffect)(function(){localStorage.getItem("phones")?T(JSON.parse(localStorage.getItem("phones")||"")):fetch("https://mate-academy.github.io/phone-catalogue-static/api/phones.json").then(function(e){return e.json()}).then(function(e){T(e.map(function(e){return Object(l.a)(Object(l.a)({},e),{},{isSelected:!1})}))})},[]),Object(a.useEffect)(function(){g(F.length);var e=(v-1)*O,t=e+O;o(F.slice(e,t))},[F,v,O]);var W=function(){for(var e in Q)"\u219f"!==Q[e].sortDirection&&"\u21a1"!==Q[e].sortDirection||(Q[e].sortDirection="\u2195")};return c.a.createElement(c.a.Fragment,null,c.a.createElement(b,{columnsConfig:Q,handleFilterChange:function(e,t){if(console.log(B,K),""===t||""===e)return L(N),q(t),void H(e);q(t),H(e),L(N.filter(function(n){return n[t].toString(10).toLowerCase().includes(e.toLowerCase())}))}}),c.a.createElement(p,{from:(v-1)*O,to:(v-1)*O+O,total:m}),c.a.createElement(f,{phones:n,initialPhones:N,setInitialPhones:T,columnsConfig:Q,onSelectionChanged:function(){},handleColumnHeadClick:function(e){if("\u2195"===Q[e].sortDirection||"\u21a1"===Q[e].sortDirection){switch(Q[e].sortType){case void 0:break;case"string":T(Object(r.a)(N).sort(function(t,n){return t[e].localeCompare(n[e])}));break;case"number":T(Object(r.a)(N).sort(function(t,n){return t[e]-n[e]}))}return W(),Q[e].sortDirection="\u219f",V(Object(l.a)({},Q)),void console.log(N)}if("\u219f"===Q[e].sortDirection){switch(Q[e].sortType){case void 0:break;case"string":T(Object(r.a)(N).sort(function(t,n){return n[e].localeCompare(t[e])}));break;case"number":T(Object(r.a)(N).sort(function(t,n){return n[e]-t[e]}))}return W(),Q[e].sortDirection="\u21a1",V(Object(l.a)({},Q)),void console.log(N)}},isAllSelected:_,handleIsAllSelectedClick:function(){P(!_),T(N.map(function(e){return e.isSelected=!_,e}))},handleRowClick:function(e){var t=!0;T(N.map(function(n){return n.id===e&&(n.isSelected=!n.isSelected),!1===n.isSelected&&(t=!1),n})),P(t)}}),c.a.createElement(h,{total:m,setTotal:g,perPage:O,setPerPage:j,page:v,setPage:k}))};i.a.render(c.a.createElement(g,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(13)}},[[8,1,2]]]);
//# sourceMappingURL=main.f3d5c3a2.chunk.js.map